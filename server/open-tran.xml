<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs 
      title="Open-Tran.eu" 
      description="Open-Tran.eu - easy access to the translations of open source projects" 
      height="40" 
      author="Jacek Åšliwerski" 
      author_affiliation="Open-Tran.eu"
      author_email="rzyj@o2.pl" 
      author_location="Dresden, Germany" 
      author_link="http://sliwerski.net"
      title_url="http://open-tran.eu">
    <Require feature="analytics"/>
  </ModulePrefs>
  <UserPref name="lang" display_name="Language" default_value="" datatype="enum">
   <EnumValue display_value="German" value="de"/>
   <EnumValue display_value="Polish" value="pl"/>
</UserPref> 
<Content type="html"><![CDATA[
<script>
function geturl(){
     var lang = prefs.getString("lang");
     if (lang == "") {
       lang = prefs.getString(".lang");
     }
     return 'http://' + lang + '.open-tran.eu';
}

function formsubmit(){
     location.href = geturl() + "/suggest/" + document.search_form.q.value;
     return false;
}

function displaySearchBar (prefs) {
     var html =
         '<form target="_parent" name="search_form" method="get"' +
              ' action="' + geturl() + '/suggest"' +
              ' onsubmit="return formsubmit();">' +
	   '<input type="text" name="q" maxlength="450" />' +
	   '<input type="submit" value="Translate" />' +
         '<form>';
     document.write(html);
}
   displaySearchBar(new _IG_Prefs(__MODULE_ID__));
   _IG_Analytics("UA-664123-3", "/google-gadget");
</script>
 ]]>
</Content>
</Module>
